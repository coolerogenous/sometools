/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/whammy@0.0.1/whammy.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
global.Whammy=function(){function t(t,a){for(var r,e=function(t){for(var a=t[0].width,r=t[0].height,e=t[0].duration,i=1;i<t.length;i++){if(t[i].width!=a)throw"Frame "+(i+1)+" has a different width";if(t[i].height!=r)throw"Frame "+(i+1)+" has a different height";if(t[i].duration<0||t[i].duration>32767)throw"Frame "+(i+1)+" has a weird duration (must be between 0 and 32767)";e+=t[i].duration}return{duration:e,width:a,height:r}}(t),n=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(r=e.duration,[].slice.call(new Uint8Array(new Float64Array([r]).buffer),0).map((function(t){return String.fromCharCode(t)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:e.width,id:176},{data:e.height,id:186}]}]}]}]}],o=0,u=0;o<t.length;){var h=[],f=0;do{h.push(t[o]),f+=t[o].duration,o++}while(o<t.length&&f<3e4);var s=0,c={id:524531317,data:[{data:u,id:231}].concat(h.map((function(t){var a=d({discardable:0,frame:t.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(s)});return s+=t.duration,{data:a,id:163}})))};n[1].data.push(c),u+=f}return i(n,a)}function a(t){for(var a=[];t>0;)a.push(255&t),t>>=8;return new Uint8Array(a.reverse())}function r(t){for(var a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return a}function e(t){var a=[];t=(t.length%8?new Array(9-t.length%8).join("0"):"")+t;for(var r=0;r<t.length;r+=8)a.push(parseInt(t.substr(r,8),2));return new Uint8Array(a)}function i(t,d){for(var o=[],u=0;u<t.length;u++){var h=t[u].data;if("object"==typeof h&&(h=i(h,d)),"number"==typeof h&&(h=e(h.toString(2))),"string"==typeof h&&(h=r(h)),h.length);var f=h.size||h.byteLength||h.length,s=Math.ceil(Math.ceil(Math.log(f)/Math.log(2))/8),c=f.toString(2),m=new Array(7*s+7+1-c.length).join("0")+c,l=new Array(s).join("0")+"1"+m;o.push(a(t[u].id)),o.push(e(l)),o.push(h)}if(d){var p=n(o);return new Uint8Array(p)}return new Blob(o,{type:"video/webm"})}function n(t,a){null==a&&(a=[]);for(var r=0;r<t.length;r++)"object"==typeof t[r]?n(t[r],a):a.push(t[r]);return a}function d(t){var a=0;if(t.keyframe&&(a|=128),t.invisible&&(a|=8),t.lacing&&(a|=t.lacing<<1),t.discardable&&(a|=1),t.trackNum>127)throw"TrackNumber > 127 not supported";return[128|t.trackNum,t.timecode>>8,255&t.timecode,a].map((function(t){return String.fromCharCode(t)})).join("")+t.frame}function o(t){for(var a,r,e=t.RIFF[0].WEBP[0],i=e.indexOf("¬ù*"),n=0,d=[];n<4;n++)d[n]=e.charCodeAt(i+3+n);return a=16383&(r=d[1]<<8|d[0]),(r=d[3]<<8|d[2])>>14,{width:a,height:16383&r,data:e,riff:t}}function u(t){for(var a=0,r={};a<t.length;){var e=t.substr(a,4),i=parseInt(t.substr(a+4,4).split("").map((function(t){var a=t.charCodeAt(0).toString(2);return new Array(8-a.length+1).join("0")+a})).join(""),2),n=t.substr(a+4+4,i);a+=8+i,r[e]=r[e]||[],"RIFF"==e||"LIST"==e?r[e].push(u(n)):r[e].push(n)}return r}function h(t,a){this.frames=[],this.duration=1e3/t,this.quality=a||.8}return h.prototype.add=function(t,a){if(void 0!==a&&this.duration)throw"you can't pass a duration if the fps is set";if(void 0===a&&!this.duration)throw"if you don't have the fps set, you ned to have durations here.";if("canvas"in t&&(t=t.canvas),"toDataURL"in t)t=t.toDataURL("image/webp",this.quality);else if("string"!=typeof t)throw"frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string";if(!/^data:image\/webp;base64,/gi.test(t))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:t,duration:a||this.duration})},h.prototype.compile=function(a){return new t(this.frames.map((function(t){var a=o(u(atob(t.image.slice(23))));return a.duration=t.duration,a})),a)},{Video:h,fromImageArray:function(a,r,e){return t(a.map((function(t){var a=o(u(atob(t.slice(23))));return a.duration=1e3/r,a})),e)},toWebM:t}}(),"undefined"!=typeof process&&(module.exports=Whammy);
//# sourceMappingURL=/sm/34bd638df44ea9b103491b1345517c62b8ef97ab4143290af32e11c6f83b57ce.map